<!DOCTYPE html>

<html lang="en">
<head>
<!-- author: Wilson Lao;  purpose: demonstrate toggling and an additional column; date of page creation: 2023-01-04 -->
	<meta charset="utf-8">
	<title>Exchange Rates</title>
	<meta name="description" content="using form text boxes continued">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="rates.js" type="module"></script>
		
	
	<script>

		//jQuery to Show/Hide Instructions
		$(document).ready(function(){
		$("#flip").click(function(){
			$("#backgroundinfo").slideToggle("slow");
		});
		});

		// the jQuery script needs to use "#results" with # in front or just "textarea"
		// placing the jQuery script first before the function seems to allow fading
		// before results show up.
		
		$(document).ready(function(){
		  $("#fade").click(function(){
			$("#results").fadeTo("slow",0.25);
		  });
		});

		// Adding another jQuery script to give the option of unfading
		$(document).ready(function(){
		  $("#unfade").click(function(){
			$("#results").fadeTo("slow",1);
		  });
		});

		// the dollar rate for each currency should be constant and not change
		// variables have to be global for calculations() function to use them.
		const euro_rate = .94;
		const cad_rate = 1.36;
		const hkd_rate = 7.82;
		const yen_rate = 130.31;
		const peso_rate = 19.33;
		
		function autoload()
		{

		// const euro_rate = .94;
		// const cad_rate = 1.36;
		// const hkd_rate = 7.82;
		// const yen_rate = 130.31;
		// const peso_rate = 19.33;

		// Typically, you need the ids to be declared first before using innerHTML
		// This will be null because ids are not declared yet.
		// To prevent this, put this inside a function that loads immediately
		document.getElementById("euro").innerHTML = euro_rate;
		document.getElementById("cad").innerHTML = cad_rate;
		document.getElementById("hkd").innerHTML = hkd_rate;
		document.getElementById("yen").innerHTML = yen_rate;
		document.getElementById("peso").innerHTML = peso_rate;

		
		document.getElementById("euro2").innerHTML = euro_rate;
		document.getElementById("cad2").innerHTML = cad_rate;
		document.getElementById("hkd2").innerHTML = hkd_rate;
		document.getElementById("yen2").innerHTML = yen_rate;
		document.getElementById("peso2").innerHTML = peso_rate;

		// Javascript does not support passing multiple variables.
		// return euro_rate, cad_rate, hkd_rate, yen_rate, peso_rate;
		}


		

		function calculations()
		{

		// autoload(euro, cad, hkd, yen, peso);
		var number1, int1;
		number1 = document.getElementById("num1").value;

		//parseInt to normalize number input into integers
		//parseInt will also return NaN if input is NOT a number, as in the case of null input
		int1 = parseInt(number1);

		// add additional conversion check to ensure number
		// number1_float = parseFloat(number1);
		
		// Because of type="number" requirement in form inputs, only numbers should be allowed
		// But still need to watch out for NaN if inputs are left blank. 
		// if else statement checks if sum is an integer
		// Otherwise, user will be asked to enter integer in each input box.
		// This condition is still good for checking if there are any NaN but will force 
		// the user to input a value in each input box.
		if (Number.isInteger(int1))
		{
			// Adding .toFixed(2) to make 2 decimal places for the dollar amount.
			document.getElementById("results1").value = (number1 * euro_rate).toFixed(2);
			document.getElementById("results2").value = (number1 * cad_rate).toFixed(2);
			document.getElementById("results3").value = (number1 * hkd_rate).toFixed(2);
			document.getElementById("results4").value = (number1 * yen_rate).toFixed(2);
			document.getElementById("results5").value = (number1 * peso_rate).toFixed(2);

		}
		else{
			document.getElementById("results").value = "Please enter a number in the input box!";
		}
		}
	</script>
	
	<!-- Using CSS to align input boxes -->
	<!-- align input text to the right as well-->
	<!-- Also using jQuery to show/hide panel-->
	<style>
	h1 {font-size: 3em; color:blue; text-align:center; font-style:italic}
	h2 {font-size: 1em; color:black; text-align:left; font-weight:bold}
	body {background-color:silver; font-size:1.5em}
	p     { display: table-row;  }
	label { display: table-cell; }
	input { display: table-cell; text-align: right; font-size: 20px; max-width: 150px;}
	table, th, td { border:1px solid black;}

	#panel, #flip {
	padding: 5px;
	text-align: center;
	background-color: #e5eecc;
	border: solid 1px #c3c3c3;
	}
	</style>
</head>

<body onload="autoload()">

<header>
	<h1>Exchange Rates</h1>
</header>


	<div id="flip">Click to Show/Hide Instructions and Display the foreign exchange rates in December 2022</div>


<section id="backgroundinfo">
<h2>Exchange Rates for 1 USD on 2023-01-04</h2>	

<table>
	<tbody>
		<!--setting variable into input for fixed currency values-->
		<tr>
		<td>Euro</td>
		<td id="euro"></td>
		</tr>
		<tr>
		<td>Canadian Dollar</td>
		<td id="cad"></td>
		</tr>
		<tr>
		<td>Hong Kong Dollar</td>
		<td id="hkd"></td>
		</tr>
		<tr>
		<td>Japanese Yen</td>
		<td id="yen"></td>
		</tr>
		<tr>
		<td>Mexican Peso</td>
		<td id="peso"></td>
		</tr>
	</tbody>
</table>
<br><br>
Enter a dollar amount in the table below to see the corresponding foreign exchange values.
</section>


<section>
	<h2>Enter the Amount of USD to convert</h2>	

<table>
<tbody>

	<!--table header spanning 3 columnns up top-->
	<tr>
	<th colspan="3">Monetary Exchange Rates</th>
	</tr>
	<tr>
	<!--aligning the subheader to center and rates center-->
	<td>Currency</td>
	<td>Rate</td>
	<td>Value</td>
	</tr>
	<tr>
	<td>Euro</td>
	<td id="euro2"></td>
	<td><input type="number" id="results1" readonly></td>
	</tr>
	<tr>
	<td>Canadian Dollar</td>
	<td id="cad2"></td>
	<td><input type="number" id="results2" readonly></td>
	</tr>
	<tr>
	<td>Hong Kong Dollar</td>
	<td id="hkd2"></td>
	<td><input type="number" id="results3" readonly></td>
	</tr>
	<tr>
	<td>Japanese Yen</td>
	<td id="yen2"></td>
	<td><input type="number" id="results4" readonly></td>
	</tr>
	<tr>
	<td>Mexican Peso</td>
	<td id="peso2"></td>
	<td><input type="number" id="results5" readonly></td>
	<tr>
	<td>Enter Dollar Amount</td>
	<td><input type="number" id="num1"></td>
	</tr>
	</tbody>
</table>
<input type="button" onclick="calculations()" value="SUBMIT">

</section>

<section>
<h2>Console</h2>
<!-- making the textbox smaller this time in comparison to Part 2. 5 rows instead of 10-->
<textarea name="results" id="results" rows="5" cols="100" readonly></textarea><br>

<!-- A button for fading and another for unfading-->
<button id="fade">Click to Fade Results</button>
<button id="unfade">Click to Unfade Results</button>
</section>

<footer>
<br><br><br>
<a href="../hw2.html">Return to HW 2</a>
</footer>

</body>

</html>